茶心阁小程序需求文档
- MySQL: `root:gs963852@tcp(127.0.0.1:3308)/tea_shop?charset=utf8mb4&parseTime=True&loc=Local`
- Redis: `127.0.0.1:6379` 密码 `123456`
- RabbitMQ: `amqp://guest:guest@127.0.0.1:5672/`
一、项目概述

- 项目名称：茶心阁 小程序及公众号
- 项目定位：集在线商城、多门店点单（堂食/外卖）、分销系统、会员管理、合伙人管理于一体的综合性茶文化平台。
- UI 要求：UI 排版参照“瑞幸咖啡”小程序。UI 风格：以简约、疗愈风格为主。
- 品牌 logo：logo1.png, logo2.png 
- 品牌 slogan：茶的温度 心的归处

二、用户角色与分销说明

2.1 用户角色介绍

- 超级管理员：管理整个平台，包括用户、门店、商品、订单、营销活动等。
- 门店管理员：管理单个门店的商品、订单、店员、桌码、核销等。
- 店员：处理单个门店的订单，核销，打印小票等。
- 用户（消费者）：注册登录，购买商品，点单，成为会员，申请合伙人，分享等。
- 会员：享受会员权益，如折扣、茶币、积分等。
- 合伙人：分为初级、中级、高级，享受不同级别的拿货折扣和推广佣金。

2.2 会员等级与权益

会员类型 | 价格 | 茶币赠送 | 拿货折扣 | 直推佣金 | 团队奖励 | 其他权益
---|---|---|---|---|---|---
普通用户 | 免费 | 0 | 原价 | 10% | 无 | 基础功能
客随主泡会员 | 365 元/年 | 0 | 消费 9.5 折 | 10% | 无 | 客随主泡无次
黄金会员 | 1999 元 | 500 | 消费 9 折 | 10% | 无 | 全平台权益
初级合伙人 | 6800 元 | 6800 | 7 折 | 30% | 10% | 全平台权益
中级合伙人 | 9800 元 | 9800 | 6 折 | 40% | 10% | 全平台权益
高级合伙人 | 16800 元 | 16800 | 5.5 折 | 45% | 10% | 全平台权益
门店管理员 | 后台设置 | 0 | 4.5 折 | 55% | 无 | 门店管理权限

2.3 佣金分配机制与结算
直接推广：30%-45%的直接佣金（直接分享/推广的用户或会员购买商品或充值产生的佣金，佣金结算=商品售价-快递费用-营销优惠费用-折扣费用）
间接推广：10%的团队管理奖（直推用户收入的10%）
升级奖励：合伙人升级差价奖励
三、功能模块
3.1 小程序前端功能

3.1.1 首页

- 轮播图（后台可配置，可设置超链接和广告）
- 会员展示（未登录提醒登录注册，非会员提醒成为会员）
- 金刚区：堂食买单、外卖、商城
- 商城（详细功能在独立页面）：轮播图、金刚区分类（送礼、投资收藏、口粮、散茶）、推荐商品（后台设置）、热销、新品、本地特色（根据定位展示）、健康茶叶
- 广告位（商品广告/优惠券等，后台可设置）
- 推荐产品（后台设置）

3.1.2 产品分类（商城产品）

- 按茶类：绿茶、红茶、乌龙茶、黑茶、白茶、黄茶、养生茶、花茶、其他茶、茶周边
- 按产区：云南、福建、浙江、贵州等主要产茶区
- 按用途：送礼、收藏、口粮、散茶
- 筛选：价格区间、包装类型、品牌等

3.1.3 门店

- 按距离展示门店列表
- 门店信息：位置、名称、联系电话、营业时间、门头图片
- 支持导航和电话联系
- 点击门店进入门店点单页面（可选择堂食或外卖）

3.1.4 我的

- 注册登录/登录信息
- 会员：申请会员、合伙人
- 订单：全部、待付款、待发货、待收货、待评价
- 钱包：余额、茶币（1:1 人民币，可消费不可提现）、账单、提现、银行卡
- 积分：积分余额、积分记录、积分商品（积分可兑换）、积分获得（购买商品/外卖/服务/活动，可以按一比一活动消费积分）
- 优惠券：待使用优惠券、已使用/已过期优惠券
- 客服：客服电话、意见反馈
- 分享：分享用户，绑定关系，查看推广人数
- 门店管理（仅门店管理员可见，管理门店后台）
- 设置：账户管理、隐私协议、关于我们
3.2 后台管理系统（平台端）

3.2.1 商品管理

- 商品分类、品牌、属性管理
- 商品上下架、价格、库存管理
- 商品信息包含：类型（商城商品、门店服务商品、积分商品、门店特供商品（设置门店特供产品（原价，无折扣））、类别、商城商品用途（送礼、投资收藏、口粮茶、健康茶）、产地、品类、品牌、商品名称、商品生产信息（生产企业）、包装（散装、礼盒、罐装等）、参数、规格、运费（选择运费模版，可以设置免运费条件：达到多少金额/数量可以免运费）、详情（图文结构）。

3.2.2 订单管理

- 查看所有订单（商城订单、门店订单、积分订单、门店特供商品订单）
- 订单处理（发货、退货退款等）

3.2.3 门店管理

- 门店列表、新增、编辑、删除
- 设置门店管理员
- 查看门店订单、业绩

3.2.4 会员管理

- 会员列表、会员等级、会员权益设置

3.2.5 合伙人管理

- 合伙人列表、等级、佣金设置
- 合伙人佣金结算

3.2.6 营销管理

- 轮播图管理
- 广告位管理
- 优惠券管理
- 积分规则设置

3.2.7 财务管理

- 平台资金流水
- 合伙人佣金提现管理
- 门店结算管理

3.2.8 系统设置

- 权限管理
- 协议设置（隐私协议等）

3.3 门店后台（网页版）

3.3.1 订单管理

- 订单提醒（语音）
- 订单处理（接单、打印小票、打印标签）

3.3.2 商品管理

- 门店商品上架（可设置堂食/外卖）
- 商品分类管理

3.3.3 门店设置

- 基本信息（名称、位置、电话、营业时间、营业执照、法人信息、经营许可信息等）
- 门店餐桌桌码管理（生成、删除扫码点餐二维码）
- 店员管理

3.3.4 财务管理

- 收款账户设置
- 账单查询（支出、收益）

3.3.5 会员管理

- 查看本门店推广的会员/合伙人

3.3.5 商家商城

商家特供产品（针对门店用品商城）

3.4 分销系统

3.4.1 分销规则

- 用户分销：用户分享商品或门店服务，成交后获得佣金。
- 合伙人分销：不同等级的合伙人享受不同的拿货折扣和推广佣金。

3.4.2 佣金计算

- 用户/会员消费：推广人获得佣金 = （原价 * 提成比例 - 优惠券金额 - 快递运费 - 折扣优惠）
- 推广新合伙人：直接推荐人获得合伙人礼包金额的 30% / 40% / 45% 作为佣金，并享受被推荐合伙人后续收入的 10% 提成。

3.4.3 佣金结算

- 销售佣金：通过微信/支付宝分账，将对应佣金直接分到分销推广员对应的账户，平台手续费根据分账金额承担对应的手续费。
- 奖励佣金：自动结算到余额，满 100 元可以提现，手动申请提现到银行卡，提现收取 1% 的手续费，每个月提现金额超过 5000 需要提供营销服务发票才能继续申请提现。

3.5 公众号

消息通知：通过公众号推送订单状态、佣金到账、活动通知等实时信息，确保用户及时掌握账户动态。

四、系统流程图
由于文本限制，这里用文字描述主要流程：
4.1 用户下单流程
用户进入小程序 -> 选择商品/服务 -> 选择门店（如果是堂食/外卖）或直接商城下单 -> 确认订单（选择使用优惠券、茶币等）-> 支付 -> 生成订单 -> 门店接单（如果是门店订单）-> 核销（堂食）或发货（外卖/商城）-> 完成

门店商品服务下单流程图：
 
4.2 分销流程
用户A分享商品/门店服务 -> 用户B通过A的分享链接购买 -> 系统记录关系 -> 订单完成 -> 计算佣金给A -> A的佣金进入钱包余额，可提现。
4.3 合伙人升级流程
用户申请成为合伙人 -> 购买对应等级的礼包 -> 支付成功 -> 升级为合伙人，获得对应的茶币和权益 -> 开始推广。

五、功能清单
5.1小程序前端：
板块	功能	功能详情
首页	Balance	商城主图（多张图片自动切换）、可以后台设置，点击可以跳转到对应的功能/产品/链接
	会员（小横条展示）	未登录：提醒注册登陆
已登录：是会员不展示、不是会员，展示开通会员享受优惠
	金刚区	堂食：点击进去，展示最近门店的堂食商品（可以切换门店），选择商品加入购物车，下单。生产订单取件码/二维码，收银台核销。
		外卖：点击进去，展示最近门店的外卖商品（可以切换门店），选择商品加入购物车，下单（选择收货地址，超过配送范围不能配送），等待商家制作配送。
		商城
1、商城Balance主图：多张图片自动切换）、可以后台设置，点击可以跳转到对应的功能/产品/链接。
2、商城金刚区
①　礼品茶：对应商城商品茶叶用途分类
②　健康茶：对应商城商品茶叶用途分类
③　口粮茶：对应商城商品茶叶用途分类
④　散装茶：对应商城商品包装分类（散茶）
⑤　投资收藏：对应商城商品茶叶用途分类
3、最近上新商品：根据最近上新商品展示，仅展示30日内上新的商品（30日内上新商品不足4个的，最少展示4个最近时间上新的商品），双排展示（展示内容：主图、标题、价格/单位）
4、热销商品：根据后台添加的推荐商品清单展示，双排展示（展示内容：主图、标题、价格/单位）
5、商品详情：主图（多图）、名称、价格、生产信息、基本信息、详情介绍、收藏、分享（可以生成分享链接（链接包含推荐人账号ID）/分享海报（海报包含商品主图、推荐人头像昵称、商品二维码：二维码包含推荐人账号ID））：被推荐用户购买之后，业绩属于推荐人，根据推荐人用户等级结算佣金
	标签区（1+2结构）	活动：平台发布的活动（状态：报名中、已结束）；
活动列表：活动主图、名称、时间、地址、报名；
活动详情：主图、名称、时间、地址、详情介绍、往期活动、报名（报名人数、姓名、联系电话）、支付报名费用
我的活动（我报名参加的活动记录）。
		邀请好友 得现金奖励：点击进入我的分享详情页面
		优惠卷：平台/商家发布优惠卷
	商品展示区	广告：商品广告/优惠卷等，后台可以设置）；
茶心阁简介区：图文介绍
推荐商品（后台设置）：根据后台添加的推荐商品清单展示，双排展示（展示内容：主图、标题、价格/单位）；
本地商品：根据所在地区，展示地方产品；
技术支持&版权声明。
分类	商城商品分类	按茶叶类别分类（二级分类），
可以进行产地、包装类型、价格进行筛选
门店	实体门店展示	按距离远近展示门店：门头图片、名称、位置、营业时间和状态
点击门店可以进入门店详情：门店基本信息（门头、名称、营业时间和状态、地址、联系电话、证件照图标（点击可以查看门店营业证件））+商品服务列表（默认展示）/外卖列表（没有外卖商品即不展示）
购物车	购物车	购物车商品需要按：商城、门店商品服务、门店外卖、积分商城进行分类展示，不同门店的商品和外卖，以门店为区分进行展示
我的	个人中心	用户头像、昵称、账户、消息（消息通知）、会员状态等级（普通用户、畅饮VIP、黄金VIP、初/中/高级合伙人）
	开通VIP	选择开通/升级的类型：普通用户、畅饮VIP、黄金VIP、初/中/高级合伙人——>展示对应会员介绍和权益——>确认开通——>支付费用——>权益生效
	订单	状态：待付款、待发货、运输中、待签收、待评价、已完成、售后中
订单列表：平台/商家、状态、主图、名称、购买数量、订单金额、再次购买、申请售后（签收后7个工作日不显示售后，签收后7个工作日默认已完成）
订单详情：平台/商家、状态、主图、名称、购买数量、订单金额、订单编号、支付单号、快递名称+单号、快递状态、下单时间、支付时间、发货时间、成交时间、售后。
	钱包	余额、茶币（1:1人民币，可消费不可提现）、账单、提现、银行卡/提现账户管理
	积分	积分余额、积分记录、积分商品展示
	优惠卷	待使用、已使用/已过期
	客服	客服电话（点击可以拨打电话）、意见反馈、帮助（各种问题解决方案文档）
	分享	分享海报（后台添加海报，可以添加多张，用户端可以切换），海报包含：分享海报图片、平台logo+平台名称+推荐人昵称+推荐人id+注册二维码（包含推荐人id）扫码绑定推荐关系。
	设置	账户管理：账号、更换电话、修改密码、解除微信绑定；登录管理：退出登陆、登陆注册；
地址管理：收货地址管理
关于我们：图文介绍
隐私协议：注册协议、会员协议、合伙人协议、
	门店管理	仅门店管理员可见，管理门店后台（门店商品/外卖管理、订单管理、店员管理、账单管理、账户管理、门店管理）

5.2后台管理系统（平台）：
板块	功能	功能详情
首页	左侧:菜单栏	商品管理、订单管理、门店管理、会员管理、合伙人管理、营销管理、财务管理、系统设置
	顶部:导航栏	快捷导航栏+搜索+消息通知+账户中心
	数据看板	展示数据：今日（默认）、昨日、本周、上周、本月、上月
订单数量（在分类展示：门店、外卖、商城、会员/合伙人各项订单数据）
销售总额（在分类展示：门店、外卖、商城、会员/合伙人各项销售额）
总用户数量（再分别展示：各种用户类型数量）
新增用户数量（再分别展示：各种用户类型数量）
商品销售排行、用户行为分析
	订单动态	商城/积分商城代发货订单、预警订单（超过48小时未发货订单、超过30分钟未开始配送订单）、售后待处理订单
	提现管理	提现待处理
	意见反馈	待处理意见反馈
商品管理	全部商品	商品筛选：类别/用途筛选、名称、商品ID、上下架状态；
商品管理：新增、上下架、删除、编辑；
商品列表：商品ID、主图、名称、类别、价格
订单管理	订单管理	订单列表、订单查找、订单管理（发货、售后、调价）
门店管理	门店管理	门店列表、门店管理（查看、新增、编辑、下架、冻结）
用户管理	全部用户	用户列表、用户筛选、
	合伙人	合伙人管理
	黑名单	禁止使用相关权限用户
	白名单	全部权限可以使用用户
营销管理	广告管理	广告列表、广告管理（编辑、上下架、删除）、新增广告、广告查找
	优惠卷	优惠卷列表（ID、名称、状态：待发布、领取中、已结束、有效中）；
优惠卷管理（新增、编辑、发布/结束）；
新增优惠卷：名称、优惠卷图片、使用规则设置、优惠卷权益介绍、有效期、针对用户群、数量。
	活动管理	活动列表、活动查找：ID、名称、发布人、状态；
活动管理：查看、编辑、发布、报名管理
新增活动：名称、活动时间、海报、活动方式（线上/线下）、地址（线下）/链接（线上）、主理人、联系人、联系电话、人数限制、报名费用、报名条件、报名信息设置、退费规则。
	充值管理	充值列表、充值查找（用户ID、时间段、支付单号）、
充值管理：查看、冻结、充钱、扣钱
充值配置：充值配置管理，充值多少送哪些权益（茶币、优惠卷、产品/服务等）
客服管理	客服管理	客服记录，新增客服服务（客服方式、用户、问题类型、处理结果）
	投诉建议	投诉建议管理
财务管理	财务记录	财务记录，财务记录筛选
	提现管理	提现审核、提现付款
系统管理	会员配置	会员权益配置
	合伙人配置	合伙人权益配置
	权限管理	权限管理、管理员管理
	基本管理	logo、电话设置、版权信息、
	快递模版	模版管理、模版设置
	内容管理	关于我们、帮助、协议、
	日志	操作日志

5.3门店后台（网页）：
板块	功能	功能详情
首页	左侧:菜单栏	订单管理、商品管理、门店设置、财务管理、会员管理、系统设置
	顶部:导航栏	快捷导航栏+搜索+消息通知+账户中心
	经营参谋	展示数据：今日（默认）、昨日、本周、上周、本月、上月
订单数量（在分类展示：门店、外卖、商城、会员/合伙人各项订单数据）
销售总额（在分类展示：门店、外卖、商品销售、会员）
	工作台	待处理订单列表：接单（选择：打印小票、打印标签、打印后厨出货小票）-制作完成（通知客户取餐/配送（选择平台骑手/自己配送）），平台骑手对接第三方骑手平台。
收银：添加商品和服务—>选择会员（没有不选择）—>添加优惠卷/优惠金额/打折—>收款（现金、扫码、刷卡、会员余额、组合支付、第三方订单卷）—>打印收款小票（可以继续打印后厨小票 和商品标签）
	商家商城	针对商家提供的商品商城
有商品分类、查找、购物车等功能
商品管理	全部商品	商品列表
	商品管理	分类、上架中、已下架、草稿、新增
	商品分类	服务商品（堂食服务）、外卖商品、其他商品
订单管理	订单列表	订单列表、订单查找
订单处理：接单、发货
	售后订单	订单退款、订单换货
营销管理	活动管理	活动列表、活动查找、
活动管理：查看活动详情、查看报名、活动发布、活动编辑
新增活动：名称、活动时间、海报、活动方式（线上/线下）、地址（线下）/链接（线上）、主理人、联系人、联系电话、人数限制、报名费用、报名条件、报名信息设置、退费规则。
	优惠卷	优惠卷列表、查找优惠卷、新增优惠卷；
优惠卷管理：编辑、发布、查看
财务管理	财务记录	收支记录
	账户管理	添加账户、账户管理（编辑、删除）
	财务提现	提现申请
系统设置	管理员	权限组编辑、管理员列表、管理员编辑
	门店信息	名称、门头图片、地址、营业时间、联系电话、环境图片、营业执照和资质证件、


