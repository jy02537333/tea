# M4 Checklist — 未完成项与可执行任务

说明：该文件根据 `茶心阁小程序开发计划.md` 中的 M4/M5 及文档中提及的未完成项拆分成可执行任务。每项包含验收标准、建议负责人和预计工作量（人日）。请在认领后把负责人替换为具体人员并在 PR/issue 中追踪。

## 门店与订单联动
- [ ] 门店面板支持查看门店订单列表（按日期、状态筛选，快捷状态按钮）
  - 验收标准：门店面板点击“订单”能列出该门店在选定时间范围内的订单；筛选与快捷按钮按预期生效。
  - 建议负责人：后端 + Admin-FE 前端
  - 预计：3-5 人日

- [ ] 点击门店订单行一键带入订单操作区并自动填充订单详情
  - 验收标准：单条点击后，订单ID出现在订单操作区并拉取到完整订单详情（含支付/物流信息）。
  - 建议负责人：前端（Admin-FE）+ 后端接口（order/detail）验收
  - 预计：2-3 人日

- [ ] 财务页门店汇总跳转到门店面板，保证数据一致性（随机抽样对账）
  - 验收标准：从财务页跳转到门店面板后，所选日期/支付方式筛选同步，抽样 10 条订单与 API-Server 返回一致。
  - 建议负责人：前端 + 后端（finance APIs）
  - 预计：2 人日

## 门店商品选品器增强
- [ ] 批量绑定弹窗支持按商品名称/分类搜索并多选
  - 验收标准：在批量绑定弹窗可检索到商品、支持多选、并能一键加入绑定列表。
  - 建议负责人：前端
  - 预计：2-3 人日

- [ ] 批量绑定支持“统一库存/统一覆盖价”与逐行单独设置，执行时显示进度和成功/失败计数
  - 验收标准：执行批量请求时显示进度条、成功/失败数、允许中途取消；失败项可导出。
  - 建议负责人：前端 + 后端批量接口支持
  - 预计：3-4 人日

- [ ] 批量/单个绑定后门店商品列表即时刷新（无需手动刷新整页）
  - 验收标准：绑定成功后当前面板的门店商品行更新库存/价格。
  - 建议负责人：前端
  - 预计：1-2 人日

## 财务工具体验完善
- [ ] 导出队列/任务进度（可选）：在大数据导出时创建后台任务并显示导出状态
  - 验收标准：当查询结果超过阈值（例如 5000）提示并可选择后端导出任务；任务完成后提供下载链接。
  - 建议负责人：后端 + 前端
  - 预计：5-8 人日

- [ ] 导出失败时提供“重试导出”入口和明确错误原因
  - 验收标准：导出失败能展示错误原因并支持重试（或重新创建导出任务）。
  - 建议负责人：前端 + 后端
  - 预计：2-3 人日

- [ ] 导出前增加最大行数提示（已部分实现）——统一验证并补充文案/确认流
  - 验收标准：当行数超阈值弹出一致性提示并阻止误操作。
  - 建议负责人：前端
  - 预计：0.5-1 人日

## 日志与排障工具
- [ ] 访问/操作日志高级筛选（method 多选、状态码区间、路径包含/排除）
  - 验收标准：能按上述维度进行组合查询并返回正确结果；导出字段顺序符合字段字典。
  - 建议负责人：前端 + 后端日志查询 API
  - 预计：3-4 人日

## WX-FE（小程序）未明确项（需确认实现进度）
- [ ] 列出所有小程序页面/组件的实现状态（已完成/进行中/未开始）并指派 owner
  - 验收标准：生成页面级别的进度表并上传到 `tasks/` 或对应 issue 列表。
  - 建议负责人：小程序开发负责人（2 人日）

## CI / 自动化建议（待落地）
- [ ] 将 `tools/browser-login/login-test.js` 集成为可选 CI job（smoke test）
  - 验收标准：CI 提供一个可选 job，运行 Playwright 脚本并产出 JSON 报告，不泄露 token。
  - 建议负责人：DevOps + 前端工程师
  - 预计：2-3 人日

- [ ] 在 CI 中增加 `go test ./...` 阶段并使用 `scripts/run-tests-test2.ps1`（或等价的 Linux 脚本）
  - 验收标准：CI 能在每次 PR 执行单元测试（或在可选 pipeline 上）。
  - 建议负责人：后端/DevOps
  - 预计：1-2 人日

## 环境与运维约束（需要运维确认）
- [ ] 确认是否继续严格禁止 Docker 的开发策略；如保留，提供标准化 VM 或安装脚本
  - 验收标准：运维提供一套可复制的 VM 镜像或 PowerShell 安装脚本，并记录在 `START_LOCAL.md`。
  - 建议负责人：运维/项目负责人
  - 预计：2-4 人日

## 小结与下一步建议
- 把上述每个勾选项在项目管理工具（或 GitHub Issues）中创建单独 issue，并在 issue body 中粘贴对应的验收标准/建议负责人/ETA。
- 我可以替你把这些条目自动转换为 GitHub issue 草稿（需要 repo 权限），或者先在 `tasks/` 下生成单独 markdown（我已生成 `tasks/m4_checklist.md`）。

---
生成时间：2025-11-28
