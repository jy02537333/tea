"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[81],{1503:function(n,e,r){var t=r(7586),s=r(6045),i=r(8646),o=r(6673),l=r(9986),a=r(7378),c=r(427),u=r(7168),d=r.n(u),f=r(8124),p=r(9776),h=r(6106);function y(){var n=(0,a.useState)([]),e=(0,l.A)(n,2),r=e[0],t=e[1],y=(0,a.useState)(null),v=(0,l.A)(y,2),g=v[0],x=v[1],b=(0,a.useState)(!1),m=(0,l.A)(b,2),w=m[0],A=m[1],j=(0,a.useState)(null),k=(0,l.A)(j,2),T=k[0],S=k[1];function E(){return C.apply(this,arguments)}function C(){return C=(0,o.A)((0,i.A)().m(function n(){return(0,i.A)().w(function(n){while(1)switch(n.n){case 0:return n.n=1,Promise.all([M(),Y()]);case 1:return n.a(2)}},n)})),C.apply(this,arguments)}function Y(){return z.apply(this,arguments)}function z(){return z=(0,o.A)((0,i.A)().m(function n(){var e;return(0,i.A)().w(function(n){while(1)switch(n.n){case 0:return n.n=1,(0,p.OT)({refreshRemote:!0});case 1:e=n.v,x(e);case 2:return n.a(2)}},n)})),z.apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return P=(0,o.A)((0,i.A)().m(function n(){var e,r,o,l,a,c,u,h=arguments;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:if(e=h.length>0&&void 0!==h[0]&&h[0],!w||e){n.n=1;break}return n.a(2);case 1:return A(!0),n.p=2,n.n=3,(0,f.MV)({page:1,limit:50});case 3:r=n.v,o=(null===r||void 0===r?void 0:r.data)||[],l=o.map(function(n){var e=(0,p.es)(n.address_info);return e?(0,s.A)((0,s.A)({},e),{},{full:e.full||(0,p.M0)(e),orderId:n.id,orderNo:n.order_no,updatedAt:(null===n||void 0===n?void 0:n.updated_at)||(null===n||void 0===n?void 0:n.created_at)}):null}).filter(Boolean),a=new Map,l.forEach(function(n){var e="".concat(n.full||n.detail||"","-").concat(n.phone||"");a.has(e)||a.set(e,n)}),c=Array.from(a.values()),t(c),S(c.length?null:"\u6682\u65e0\u53ef\u56de\u6536\u7684\u5730\u5740\uff0c\u5b8c\u6210\u4e00\u6b21\u914d\u9001\u8ba2\u5355\u5373\u53ef\u6c89\u6dc0\u5730\u5740\u4fe1\u606f"),n.n=5;break;case 4:n.p=4,u=n.v,console.error("load addresses failed",u),S((null===u||void 0===u?void 0:u.message)||"\u52a0\u8f7d\u5931\u8d25");case 5:return n.p=5,A(!1),d().stopPullDownRefresh(),n.f(5);case 6:return n.a(2)}},n,null,[[2,4,5,6]])})),P.apply(this,arguments)}function R(n){return D.apply(this,arguments)}function D(){return D=(0,o.A)((0,i.A)().m(function n(e){var r;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,p.ns)(e);case 1:return n.n=2,Y();case 2:d().showToast({title:"\u9ed8\u8ba4\u5730\u5740\u5df2\u66f4\u65b0",icon:"success"}),n.n=4;break;case 3:n.p=3,r=n.v,console.error("save default address failed",r),d().showToast({title:"\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"});case 4:return n.a(2)}},n,null,[[0,3]])})),D.apply(this,arguments)}function $(n){return _.apply(this,arguments)}function _(){return _=(0,o.A)((0,i.A)().m(function n(e){var r,t;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,r=e.full||(0,p.M0)(e),r){n.n=1;break}return d().showToast({title:"\u5730\u5740\u4e3a\u7a7a",icon:"none"}),n.a(2);case 1:return n.n=2,d().setClipboardData({data:r});case 2:d().showToast({title:"\u5df2\u590d\u5236",icon:"success"}),n.n=4;break;case 3:n.p=3,t=n.v,console.error("copy address failed",t);case 4:return n.a(2)}},n,null,[[0,3]])})),_.apply(this,arguments)}return(0,a.useEffect)(function(){E()},[]),(0,u.usePullDownRefresh)(function(){Promise.all([M(!0),Y()])}),(0,h.jsxs)(c.Ss,{style:{padding:16,backgroundColor:"#f5f6f8",minHeight:"100vh"},children:[(0,h.jsxs)(c.Ss,{style:{backgroundColor:"#fff",borderRadius:12,padding:16},children:[(0,h.jsx)(c.EY,{style:{fontSize:18,fontWeight:"bold"},children:"\u9ed8\u8ba4\u6536\u8d27\u5730\u5740"}),g?(0,h.jsxs)(c.Ss,{style:{marginTop:12},children:[(0,h.jsx)(c.EY,{style:{display:"block",fontSize:16},children:(0,p.M0)(g)}),(0,h.jsxs)(c.EY,{style:{display:"block",color:"#999",marginTop:4},children:["\u6700\u8fd1\u540c\u6b65\uff1a",g.updatedAt||"\u672a\u77e5"]})]}):(0,h.jsx)(c.EY,{style:{display:"block",color:"#999",marginTop:12},children:"\u5c1a\u672a\u8bbe\u7f6e\u9ed8\u8ba4\u5730\u5740\uff0c\u53ef\u4ece\u4e0b\u65b9\u5386\u53f2\u5730\u5740\u9009\u62e9"})]}),(0,h.jsxs)(c.Ss,{style:{backgroundColor:"#fff",borderRadius:12,padding:16,marginTop:16},children:[(0,h.jsxs)(c.Ss,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,h.jsx)(c.EY,{style:{fontSize:18,fontWeight:"bold"},children:"\u5386\u53f2\u5730\u5740"}),(0,h.jsx)(c.$n,{size:"mini",loading:w,onClick:function(){return M(!0)},children:"\u5237\u65b0"})]}),T&&(0,h.jsx)(c.EY,{style:{color:"#ff4d4f",display:"block",marginTop:12},children:T}),!T&&!r.length&&(0,h.jsx)(c.EY,{style:{color:"#999",display:"block",marginTop:12},children:"\u6682\u65e0\u6570\u636e"}),r.map(function(n){return(0,h.jsxs)(c.Ss,{style:{marginTop:12,borderTop:"1px solid #f0f0f0",paddingTop:12},children:[(0,h.jsx)(c.EY,{style:{display:"block",fontSize:16},children:(0,p.M0)(n)}),(0,h.jsxs)(c.EY,{style:{color:"#999",fontSize:12},children:["\u6765\u6e90\u8ba2\u5355 #",n.orderNo]}),(0,h.jsxs)(c.Ss,{style:{display:"flex",marginTop:8,gap:8},children:[(0,h.jsx)(c.$n,{size:"mini",onClick:function(){return R(n)},children:"\u8bbe\u4e3a\u9ed8\u8ba4"}),(0,h.jsx)(c.$n,{size:"mini",onClick:function(){return $(n)},children:"\u590d\u5236"})]})]},"".concat(n.orderId,"-").concat(n.detail))})]}),(0,h.jsx)(c.Ss,{style:{marginTop:24},children:(0,h.jsx)(c.$n,{type:"primary",onClick:function(){return d().navigateTo({url:"/pages/checkout/index"})},children:"\u53bb\u4e0b\u5355\u586b\u5199\u65b0\u5730\u5740"})})]})}var v={navigationBarTitleText:"\u6536\u8d27\u5730\u5740",enablePullDownRefresh:!0},g=(0,t.eU)(y,"pages/address/index",{root:{cn:[]}},v||{});y&&y.behaviors&&(g.behaviors=(g.behaviors||[]).concat(y.behaviors));Page(g)}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[907,96,76],function(){return e(1503)});n.O()}]);