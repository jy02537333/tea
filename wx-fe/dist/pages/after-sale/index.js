"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[35],{1621:function(n,e,i){var r=i(7586),t=i(8646),o=i(6673),s=i(9986),l=i(7378),a=i(427),c=i(7168),u=i.n(c),d=i(8124),f=i(9776),p=i(6106),h={1:"\u5f85\u4ed8\u6b3e",2:"\u5f85\u53d1\u8d27",3:"\u914d\u9001\u4e2d",4:"\u5df2\u5b8c\u6210",5:"\u5df2\u53d6\u6d88"};function v(){var n=(0,l.useState)([]),e=(0,s.A)(n,2),i=e[0],r=e[1],v=(0,l.useState)(!1),y=(0,s.A)(v,2),g=y[0],x=y[1],b=(0,l.useState)(null),m=(0,s.A)(b,2),j=m[0],k=m[1],w=(0,l.useState)(null),S=(0,s.A)(w,2),A=S[0],C=S[1];function E(){return T.apply(this,arguments)}function T(){return T=(0,o.A)((0,t.A)().m(function n(){var e,i;return(0,t.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return x(!0),n.p=1,n.n=2,(0,d.MV)({page:1,limit:20});case 2:e=n.v,r((null===e||void 0===e?void 0:e.data)||[]),C(null),n.n=4;break;case 3:n.p=3,i=n.v,console.error("load orders failed",i),C((null===i||void 0===i?void 0:i.message)||"\u8ba2\u5355\u52a0\u8f7d\u5931\u8d25");case 4:return n.p=4,x(!1),u().stopPullDownRefresh(),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])})),T.apply(this,arguments)}function Y(n){return h[n||0]||"\u72b6\u6001".concat(null!==n&&void 0!==n?n:"-")}function z(n){return 1===Number(n.status)}function N(n){return 1===Number(n.status)}function R(n){return 3===Number(n.status)}function B(n,e){return P.apply(this,arguments)}function P(){return P=(0,o.A)((0,t.A)().m(function n(e,i){var r;return(0,t.A)().w(function(n){while(1)switch(n.p=n.n){case 0:if(k({id:e.id,type:i}),n.p=1,"pay"!==i){n.n=3;break}return n.n=2,(0,d.Tg)(e.id);case 2:n.n=6;break;case 3:if("cancel"!==i){n.n=5;break}return n.n=4,(0,d.N4)(e.id,"\u7528\u6237\u7533\u8bf7\u53d6\u6d88");case 4:n.n=6;break;case 5:return n.n=6,(0,d.Ad)(e.id);case 6:return u().showToast({title:"\u64cd\u4f5c\u6210\u529f",icon:"success"}),n.n=7,E();case 7:n.n=9;break;case 8:n.p=8,r=n.v,console.error("after-sale action failed",r),u().showToast({title:"\u64cd\u4f5c\u5931\u8d25",icon:"none"});case 9:return n.p=9,k(null),n.f(9);case 10:return n.a(2)}},n,null,[[1,8,9,10]])})),P.apply(this,arguments)}return(0,l.useEffect)(function(){E()},[]),(0,c.usePullDownRefresh)(function(){E()}),(0,p.jsxs)(a.Ss,{style:{padding:16,backgroundColor:"#f5f6f8",minHeight:"100vh"},children:[(0,p.jsx)(a.Ss,{style:{marginBottom:12},children:(0,p.jsx)(a.EY,{style:{fontSize:16,color:"#666"},children:"\u53ef\u5bf9\u6700\u8fd1\u8ba2\u5355\u6267\u884c\u53d6\u6d88\u3001\u652f\u4ed8\u3001\u786e\u8ba4\u6536\u8d27\u7b49\u64cd\u4f5c\u3002"})}),A&&(0,p.jsx)(a.EY,{style:{color:"#ff4d4f",marginBottom:12},children:A}),!i.length&&!A&&(0,p.jsx)(a.Ss,{style:{backgroundColor:"#fff",borderRadius:12,padding:16},children:(0,p.jsx)(a.EY,{style:{color:"#999"},children:g?"\u52a0\u8f7d\u4e2d...":"\u6682\u65e0\u8ba2\u5355"})}),i.map(function(n){var e=(0,f.es)(n.address_info);return(0,p.jsxs)(a.Ss,{style:{backgroundColor:"#fff",borderRadius:12,padding:16,marginBottom:12},children:[(0,p.jsxs)(a.Ss,{style:{display:"flex",justifyContent:"space-between"},children:[(0,p.jsxs)(a.EY,{style:{fontWeight:"bold"},children:["\u8ba2\u5355\u53f7\uff1a",n.order_no]}),(0,p.jsx)(a.EY,{style:{color:"#1677ff"},children:Y(Number(n.status))})]}),e&&(0,p.jsx)(a.EY,{style:{color:"#666",marginTop:6},children:(0,f.M0)(e)}),n.remark&&(0,p.jsxs)(a.EY,{style:{color:"#999",fontSize:12},children:["\u5907\u6ce8\uff1a",n.remark]}),(0,p.jsxs)(a.Ss,{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:[z(n)&&(0,p.jsx)(a.$n,{size:"mini",loading:(null===j||void 0===j?void 0:j.id)===n.id&&"pay"===(null===j||void 0===j?void 0:j.type),onClick:function(){return B(n,"pay")},children:"\u53bb\u652f\u4ed8"}),N(n)&&(0,p.jsx)(a.$n,{size:"mini",loading:(null===j||void 0===j?void 0:j.id)===n.id&&"cancel"===(null===j||void 0===j?void 0:j.type),onClick:function(){return B(n,"cancel")},children:"\u53d6\u6d88\u8ba2\u5355"}),R(n)&&(0,p.jsx)(a.$n,{size:"mini",loading:(null===j||void 0===j?void 0:j.id)===n.id&&"receive"===(null===j||void 0===j?void 0:j.type),onClick:function(){return B(n,"receive")},children:"\u786e\u8ba4\u6536\u8d27"}),(0,p.jsx)(a.$n,{size:"mini",onClick:function(){return u().navigateTo({url:"/pages/order-detail/index?id=".concat(n.id)})},children:"\u67e5\u770b\u8be6\u60c5"})]})]},n.id)})]})}var y={navigationBarTitleText:"\u552e\u540e\u670d\u52a1",enablePullDownRefresh:!0},g=(0,r.eU)(v,"pages/after-sale/index",{root:{cn:[]}},y||{});v&&v.behaviors&&(g.behaviors=(g.behaviors||[]).concat(v.behaviors));Page(g)}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[907,96,76],function(){return e(1621)});n.O()}]);