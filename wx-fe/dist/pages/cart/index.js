"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[123],{1016:function(n,r,e){var t=e(7586),i=e(8646),o=e(6045),a=e(6673),c=e(9986),u=e(7378),s=e(427),l=e(7168),d=e.n(l),p=e(1243),f=e(5665),h=e(6106);function y(){var n=(0,u.useState)([]),r=(0,c.A)(n,2),e=r[0],t=r[1],l=(0,u.useState)(!1),y=(0,c.A)(l,2),v=y[0],m=y[1];function x(){return A.apply(this,arguments)}function A(){return A=(0,a.A)((0,i.A)().m(function n(){var r,e,a,c,u,s,l;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return m(!0),n.p=1,n.n=2,(0,p.Fx)();case 2:return r=n.v,e=r||[],n.n=3,(0,f.d$)({page:1,limit:200});case 3:a=n.v,c=a,u=Array.isArray(null===c||void 0===c?void 0:c.data)?c.data:Array.isArray(null===c||void 0===c?void 0:c.items)?c.items:Array.isArray(c)?c:[],s=e.map(function(n){return(0,o.A)((0,o.A)({},n),{},{product:u.find(function(r){return r.id===n.product_id})})}),t(s),n.n=5;break;case 4:n.p=4,l=n.v,console.error("load cart failed",l);case 5:return n.p=5,m(!1),n.f(5);case 6:return n.a(2)}},n,null,[[1,4,5,6]])})),A.apply(this,arguments)}function g(n,r){return w.apply(this,arguments)}function w(){return w=(0,a.A)((0,i.A)().m(function n(r,e){var a;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:if(!(e<=0)){n.n=1;break}return n.a(2);case 1:return n.p=1,n.n=2,(0,p.V2)(r,e);case 2:t(function(n){return n.map(function(n){return n.id===r?(0,o.A)((0,o.A)({},n),{},{quantity:e}):n})}),n.n=4;break;case 3:n.p=3,a=n.v,console.error("update cart failed",a);case 4:return n.a(2)}},n,null,[[1,3]])})),w.apply(this,arguments)}function b(n){return j.apply(this,arguments)}function j(){return j=(0,a.A)((0,i.A)().m(function n(r){var e;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,p.SM)(r);case 1:t(function(n){return n.filter(function(n){return n.id!==r})}),n.n=3;break;case 2:n.p=2,e=n.v,console.error("remove cart item failed",e);case 3:return n.a(2)}},n,null,[[0,2]])})),j.apply(this,arguments)}function k(){return e.reduce(function(n,r){var e,t,i=Number(null!==(e=null===(t=r.product)||void 0===t?void 0:t.price)&&void 0!==e?e:0)||0;return n+i*r.quantity},0)}function S(){e.length?d().navigateTo({url:"/pages/checkout/index"}):d().showToast({title:"\u8d2d\u7269\u8f66\u4e3a\u7a7a",icon:"none",duration:1500})}return(0,u.useEffect)(function(){x()},[]),(0,h.jsxs)(s.Ss,{style:{padding:12},children:[v&&(0,h.jsx)(s.EY,{children:"\u52a0\u8f7d\u4e2d..."}),!v&&!e.length&&(0,h.jsx)(s.EY,{children:"\u8d2d\u7269\u8f66\u4e3a\u7a7a"}),e.map(function(n){var r;return(0,h.jsxs)(s.Ss,{style:{marginBottom:12,borderBottomWidth:1,borderStyle:"solid",borderColor:"#eee",paddingBottom:8},children:[(0,h.jsx)(s.EY,{style:{fontSize:16,fontWeight:"bold"},children:(null===(r=n.product)||void 0===r?void 0:r.name)||"\u5546\u54c1#".concat(n.product_id)}),(0,h.jsxs)(s.EY,{children:[" \u6570\u91cf: ",n.quantity]}),(0,h.jsxs)(s.Ss,{style:{marginTop:4,display:"flex",flexDirection:"row"},children:[(0,h.jsx)(s.$n,{size:"mini",onClick:function(){return g(n.id,n.quantity-1)},children:"-"}),(0,h.jsx)(s.$n,{size:"mini",onClick:function(){return g(n.id,n.quantity+1)},style:{marginLeft:8},children:"+"}),(0,h.jsx)(s.$n,{size:"mini",type:"warn",style:{marginLeft:8},onClick:function(){return b(n.id)},children:"\u5220\u9664"})]})]},n.id)}),e.length>0&&(0,h.jsxs)(s.Ss,{style:{marginTop:12},children:[(0,h.jsxs)(s.EY,{children:["\u5408\u8ba1: ",k()]}),(0,h.jsx)(s.Ss,{style:{marginTop:8,display:"flex",flexDirection:"row"},children:(0,h.jsx)(s.$n,{style:{marginLeft:8},type:"primary",onClick:S,children:"\u53bb\u7ed3\u7b97"})})]})]})}var v={},m=(0,t.eU)(y,"pages/cart/index",{root:{cn:[]}},v||{});y&&y.behaviors&&(m.behaviors=(m.behaviors||[]).concat(y.behaviors));Page(m)}},function(n){var r=function(r){return n(n.s=r)};n.O(0,[907,96,76],function(){return r(1016)});n.O()}]);