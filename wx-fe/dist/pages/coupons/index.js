"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[264],{3908:function(n,o,t){var r=t(7586),e=t(8646),i=t(6673),c=t(9986),a=t(7378),s=t(427),u=t(7168),l=t.n(u),f=t(8773);function p(){return d.apply(this,arguments)}function d(){return d=(0,i.A)((0,e.A)().m(function n(){var o;return(0,e.A)().w(function(n){while(1)switch(n.n){case 0:return n.n=1,f.Ay.get("/api/v1/user/coupons");case 1:return o=n.v,n.a(2,(0,f.Bm)(o))}},n)})),d.apply(this,arguments)}var h=t(6106);function m(){var n=(0,a.useState)([]),o=(0,c.A)(n,2),t=o[0],r=o[1],u=(0,a.useState)(!1),f=(0,c.A)(u,2),d=f[0],m=f[1],y=(0,a.useState)("platform"),v=(0,c.A)(y,2),x=v[0],g=v[1];function b(){return w.apply(this,arguments)}function w(){return w=(0,i.A)((0,e.A)().m(function n(){var o,t;return(0,e.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return m(!0),n.p=1,n.n=2,p();case 2:o=n.v,r(Array.isArray(o)?o:[]),n.n=4;break;case 3:n.p=3,t=n.v,console.error("load my coupons failed",t),l().showToast({title:"\u52a0\u8f7d\u4f18\u60e0\u5238\u5931\u8d25",icon:"none"});case 4:return n.p=4,m(!1),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])})),w.apply(this,arguments)}function A(n){g(n)}(0,a.useEffect)(function(){b()},[]);var k=t.filter(function(n){return!n.coupon.store_id}),j=t.filter(function(n){return!!n.coupon.store_id}),S="platform"===x?k:j;function B(n){var o=n.coupon;return 1===o.type&&o.amount?"".concat(o.name,"\uff08\u6ee1\u51cf\uffe5").concat(o.amount,"\uff09"):2===o.type&&o.discount?"".concat(o.name,"\uff08\u6298\u6263").concat(o.discount,"\uff09"):o.name}function E(n){var o;return"\u6709\u6548\u671f\u81f3\uff1a".concat(null===(o=n.coupon.end_time)||void 0===o?void 0:o.replace("T"," ").slice(0,16))}return(0,h.jsxs)(s.Ss,{style:{padding:12},children:[(0,h.jsxs)(s.Ss,{style:{marginBottom:12,display:"flex",flexDirection:"row"},children:[(0,h.jsx)(s.$n,{size:"mini",onClick:function(){return A("platform")},style:{marginRight:8,backgroundColor:"platform"===x?"#07c160":"#f5f5f5",color:"platform"===x?"#fff":"#333"},children:"\u5e73\u53f0\u5238"}),(0,h.jsx)(s.$n,{size:"mini",onClick:function(){return A("store")},style:{backgroundColor:"store"===x?"#07c160":"#f5f5f5",color:"store"===x?"#fff":"#333"},children:"\u95e8\u5e97\u5238"})]}),d&&(0,h.jsx)(s.EY,{children:"\u52a0\u8f7d\u4e2d..."}),!d&&!S.length&&(0,h.jsx)(s.EY,{children:"\u6682\u65e0\u53ef\u7528\u4f18\u60e0\u5238"}),!d&&S.map(function(n){return(0,h.jsxs)(s.Ss,{style:{marginBottom:12,padding:12,borderRadius:8,backgroundColor:"#ffffff",boxShadow:"0 2px 6px rgba(0,0,0,0.04)"},children:[(0,h.jsx)(s.EY,{style:{display:"block",fontWeight:"bold",marginBottom:4},children:B(n)}),(0,h.jsx)(s.EY,{style:{display:"block",fontSize:12,color:"#666",marginBottom:4},children:E(n)}),(0,h.jsx)(s.EY,{style:{display:"block",fontSize:12,color:"#999"},children:n.coupon.store_id?"\u95e8\u5e97\u5238\uff08store_id=".concat(n.coupon.store_id,"\uff09"):"\u5e73\u53f0\u5238\uff08\u5168\u5e73\u53f0\u9002\u7528\u6216\u6309\u5238\u89c4\u5219\uff09"})]},n.id)})]})}var y={navigationBarTitleText:"\u6211\u7684\u4f18\u60e0\u5238"},v=(0,r.eU)(m,"pages/coupons/index",{root:{cn:[]}},y||{});m&&m.behaviors&&(v.behaviors=(v.behaviors||[]).concat(m.behaviors));Page(v)}},function(n){var o=function(o){return n(n.s=o)};n.O(0,[907,96,76],function(){return o(3908)});n.O()}]);