"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[421],{8301:function(n,i,e){var t=e(7586),r=e(8646),o=e(6673),s=e(9986),a=e(7378),l=e(427),c=e(7168),d=e.n(c),u=e(5665),f=e(6787),p=e(6106);function h(){var n=(0,a.useState)(""),i=(0,s.A)(n,2),e=i[0],t=i[1],c=(0,a.useState)([]),h=(0,s.A)(c,2),v=h[0],m=h[1],y=(0,a.useState)([]),x=(0,s.A)(y,2),g=x[0],A=x[1],w=(0,a.useState)(void 0),j=(0,s.A)(w,2),S=j[0],b=j[1],k=(0,a.useState)(!1),B=(0,s.A)(k,2),C=B[0],_=B[1];function T(){return E.apply(this,arguments)}function E(){return E=(0,o.A)((0,r.A)().m(function n(){return(0,r.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return _(!0),n.p=1,n.n=2,Promise.all([z(),$()]);case 2:return n.p=2,_(!1),n.f(2);case 3:return n.a(2)}},n,null,[[1,,2,3]])})),E.apply(this,arguments)}function z(){return Y.apply(this,arguments)}function Y(){return Y=(0,o.A)((0,r.A)().m(function n(){var i,e,t,o;return(0,r.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,f.Rr)({page:1,limit:20});case 1:i=n.v,e=i,t=[],Array.isArray(null===e||void 0===e?void 0:e.data)?t=e.data:Array.isArray(null===e||void 0===e?void 0:e.items)?t=e.items:Array.isArray(e)&&(t=e),A(t),!S&&t.length>0&&b(t[0].id),n.n=3;break;case 2:n.p=2,o=n.v,console.error("load stores failed",o);case 3:return n.a(2)}},n,null,[[0,2]])})),Y.apply(this,arguments)}function $(n){return R.apply(this,arguments)}function R(){return R=(0,o.A)((0,r.A)().m(function n(i){var t,o,s,a,l,c;return(0,r.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,t=void 0!==(null===i||void 0===i?void 0:i.keyword)?i.keyword:e||void 0,o=void 0!==(null===i||void 0===i?void 0:i.store_id)?i.store_id:S,n.n=1,(0,u.d$)({page:1,limit:20,keyword:t,store_id:o});case 1:s=n.v,a=s,l=[],Array.isArray(null===a||void 0===a?void 0:a.data)?l=a.data:Array.isArray(null===a||void 0===a?void 0:a.items)?l=a.items:Array.isArray(a)&&(l=a),m(l),n.n=3;break;case 2:n.p=2,c=n.v,console.error("load products failed",c);case 3:return n.a(2)}},n,null,[[0,2]])})),R.apply(this,arguments)}function W(n){var i,r,o=null!==(i=null===n||void 0===n||null===(r=n.detail)||void 0===r?void 0:r.value)&&void 0!==i?i:e;t(o),$({keyword:o,store_id:S})}function J(n){b(n),$({store_id:n})}function O(){S?d().navigateTo({url:"/pages/store-finance/index?store_id=".concat(S)}):d().showToast({title:"\u8bf7\u5148\u9009\u62e9\u95e8\u5e97",icon:"none"})}function P(){S?d().navigateTo({url:"/pages/store-accounts/index?store_id=".concat(S)}):d().showToast({title:"\u8bf7\u5148\u9009\u62e9\u95e8\u5e97",icon:"none"})}function D(){S?d().navigateTo({url:"/pages/activities/index?store_id=".concat(S)}):d().showToast({title:"\u8bf7\u5148\u9009\u62e9\u95e8\u5e97",icon:"none"})}return(0,a.useEffect)(function(){T()},[]),(0,p.jsxs)(l.Ss,{style:{padding:12},children:[(0,p.jsx)(l.Ss,{style:{marginBottom:12},children:(0,p.jsx)(l.pd,{type:"text",placeholder:"\u641c\u7d22\u5546\u54c1",value:e,onInput:function(n){return t(n.detail.value)},onConfirm:W})}),(0,p.jsx)(l.Ss,{style:{marginBottom:12},children:(0,p.jsx)(l.$n,{size:"mini",onClick:function(){return d().navigateTo({url:"/pages/category/index"})},children:"\u8fdb\u5165\u5206\u7c7b / \u5546\u54c1\u5217\u8868"})}),(0,p.jsx)(l.Ss,{style:{marginBottom:12},children:(0,p.jsx)(l.$n,{size:"mini",onClick:D,children:"\u67e5\u770b\u95e8\u5e97\u6d3b\u52a8"})}),(0,p.jsx)(l.Ss,{style:{marginBottom:12},children:(0,p.jsx)(l.$n,{size:"mini",onClick:O,children:"\u67e5\u770b\u95e8\u5e97\u8d22\u52a1\u6d41\u6c34"})}),(0,p.jsx)(l.Ss,{style:{marginBottom:12},children:(0,p.jsx)(l.$n,{size:"mini",onClick:P,children:"\u95e8\u5e97\u6536\u6b3e\u8d26\u6237\u8bbe\u7f6e"})}),(0,p.jsx)(l.Ss,{style:{marginBottom:12,display:"flex",flexDirection:"row",flexWrap:"wrap"},children:g.map(function(n){return(0,p.jsx)(l.Ss,{style:{padding:8,marginRight:8,marginBottom:8,borderRadius:4,backgroundColor:n.id===S?"#007aff":"#f0f0f0"},onClick:function(){return J(n.id)},children:(0,p.jsx)(l.EY,{style:{color:n.id===S?"#fff":"#333"},children:n.name})},n.id)})}),(0,p.jsxs)(l.Ss,{children:[C&&(0,p.jsx)(l.EY,{children:"\u52a0\u8f7d\u4e2d..."}),!C&&0===v.length&&(0,p.jsx)(l.EY,{children:"\u6682\u65e0\u5546\u54c1"}),v.map(function(n){return(0,p.jsxs)(l.Ss,{style:{marginBottom:12,borderBottomWidth:1,borderStyle:"solid",borderColor:"#eee",paddingBottom:8},children:[(0,p.jsx)(l.EY,{style:{fontSize:16,fontWeight:"bold"},children:n.name}),(0,p.jsxs)(l.EY,{children:[" \u4ef7\u683c: ",n.price]})]},n.id)})]})]})}var v={},m=(0,t.eU)(h,"pages/index/index",{root:{cn:[]}},v||{});h&&h.behaviors&&(m.behaviors=(m.behaviors||[]).concat(h.behaviors));Page(m)}},function(n){var i=function(i){return n(n.s=i)};n.O(0,[907,96,76],function(){return i(8301)});n.O()}]);