"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[547],{9356:function(e,r,n){var t=n(7586),o=n(4302),s=n(8646),i=n(6673),c=n(9986),a=n(7378),u=n(427),l=n(7168),h=n.n(l),d=n(8124),f=n(6106);function p(e){var r=Number(e.status||e.order_status||0),n=Number(e.pay_status||0);return 5===r?"\u5df2\u53d6\u6d88":2!==n||2!==r&&4!==r?1===r&&1===n?"\u5f85\u652f\u4ed8":"\u5904\u7406\u4e2d":"\u5df2\u652f\u4ed8"}function y(e){var r=Number(e||0);return r.toFixed(2)}function m(){var e=(0,a.useState)([]),r=(0,c.A)(e,2),n=r[0],t=r[1],m=(0,a.useState)(1),b=(0,c.A)(m,2),g=b[0],x=b[1],w=(0,a.useState)(!0),A=(0,c.A)(w,2),v=A[0],j=A[1],E=(0,a.useState)(!1),S=(0,c.A)(E,2),Y=S[0],_=S[1];function k(){return T.apply(this,arguments)}function T(){return T=(0,i.A)((0,s.A)().m(function e(){return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:return x(1),j(!0),t([]),e.n=1,z(1,!0);case 1:return e.a(2)}},e)})),T.apply(this,arguments)}function N(){return R.apply(this,arguments)}function R(){return R=(0,i.A)((0,s.A)().m(function e(){var r;return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:return r=g+1,e.n=1,z(r,!1);case 1:return e.a(2)}},e)})),R.apply(this,arguments)}function z(e,r){return B.apply(this,arguments)}function B(){return B=(0,i.A)((0,s.A)().m(function e(r,i){var c,a,u,l,f;return(0,s.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return _(!0),e.p=1,e.n=2,(0,d.MV)({page:r,limit:20,status:0});case 2:c=e.v,a=Array.isArray(c.data)?c.data:[],u=a.filter(function(e){return 4===Number(e.order_type)}),l=i?u:[].concat((0,o.A)(n),(0,o.A)(u)),t(l),x(r),j(u.length>=20),e.n=4;break;case 3:e.p=3,f=e.v,console.error("load membership orders failed",f),h().showToast({title:"\u52a0\u8f7d\u4f1a\u5458\u8ba2\u5355\u5931\u8d25",icon:"none"});case 4:return e.p=4,_(!1),h().stopPullDownRefresh(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),B.apply(this,arguments)}return(0,a.useEffect)(function(){k()},[]),(0,l.usePullDownRefresh)(function(){k()}),(0,l.useReachBottom)(function(){!Y&&v&&N()}),(0,f.jsxs)(u.Ss,{style:{minHeight:"100vh",backgroundColor:"#f5f6f8"},children:[(0,f.jsx)(u.Ss,{style:{padding:16},children:(0,f.jsx)(u.EY,{style:{fontSize:18,fontWeight:"bold"},children:"\u6211\u7684\u4f1a\u5458\u8ba2\u5355"})}),(0,f.jsxs)(u.BM,{scrollY:!0,style:{height:"calc(100vh - 48px)",padding:16},lowerThreshold:60,children:[0===n.length&&!Y&&(0,f.jsx)(u.EY,{style:{color:"#999"},children:"\u6682\u65e0\u4f1a\u5458\u8ba2\u5355"}),n.map(function(e){return(0,f.jsxs)(u.Ss,{style:{marginBottom:12,padding:12,borderRadius:8,backgroundColor:"#fff",borderWidth:1,borderColor:"#eee"},children:[(0,f.jsxs)(u.EY,{style:{fontSize:14,color:"#333"},children:["\u8ba2\u5355\u53f7\uff1a",e.order_no]}),(0,f.jsxs)(u.EY,{style:{marginTop:4,color:"#666"},children:["\u91d1\u989d\uff1a\uffe5",y(e.pay_amount)]}),(0,f.jsxs)(u.EY,{style:{marginTop:4,color:"#666"},children:["\u72b6\u6001\uff1a",p(e)]}),(0,f.jsxs)(u.EY,{style:{marginTop:4,color:"#999",fontSize:12},children:["\u4e0b\u5355\u65f6\u95f4\uff1a",e.created_at||""]})]},e.id)}),Y&&(0,f.jsx)(u.EY,{style:{color:"#999"},children:"\u52a0\u8f7d\u4e2d..."}),!Y&&v&&n.length>0&&(0,f.jsx)(u.EY,{style:{color:"#999"},children:"\u4e0a\u62c9\u52a0\u8f7d\u66f4\u591a..."}),!Y&&!v&&n.length>0&&(0,f.jsx)(u.EY,{style:{color:"#999"},children:"\u5df2\u65e0\u66f4\u591a\u8ba2\u5355"})]})]})}var b={},g=(0,t.eU)(m,"pages/membership-orders/index",{root:{cn:[]}},b||{});m&&m.behaviors&&(g.behaviors=(g.behaviors||[]).concat(m.behaviors));Page(g)}},function(e){var r=function(r){return e(e.s=r)};e.O(0,[907,96,76],function(){return r(9356)});e.O()}]);