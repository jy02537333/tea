"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[481],{3404:function(n,e,i){var t=i(7586),o=i(8646),s=i(6673),l=i(9986),c=i(7378),a=i(427),r=i(7168),d=i.n(r),u=i(4227),f=i(8773),h=i(6106);function p(){var n=(0,c.useState)(null),e=(0,l.A)(n,2),i=e[0],t=e[1],p=(0,c.useState)(!1),g=(0,l.A)(p,2),x=g[0],y=g[1],b=(0,c.useState)(null),m=(0,l.A)(b,2),v=m[0],k=m[1];function T(){return j.apply(this,arguments)}function j(){return j=(0,s.A)((0,o.A)().m(function n(){var e,i;return(0,o.A)().w(function(n){while(1)switch(n.p=n.n){case 0:return y(!0),n.p=1,n.n=2,(0,u.ug)();case 2:e=n.v,t(e),k(null),n.n=4;break;case 3:n.p=3,i=n.v,t(null),k((null===i||void 0===i?void 0:i.message)||"\u672a\u767b\u5f55");case 4:return n.p=4,y(!1),d().stopPullDownRefresh(),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])})),j.apply(this,arguments)}function w(){d().navigateTo({url:"/pages/login/index"}).catch(function(){d().switchTab({url:"/pages/index/index"}).catch(function(){})})}function S(){return!!i||(d().showToast({title:"\u8bf7\u5148\u767b\u5f55",icon:"none"}),w(),!1)}function C(){S()&&d().navigateTo({url:"/pages/orders/index"}).catch(function(){})}function R(){S()&&d().navigateTo({url:"/pages/coupons/index"}).catch(function(){})}function E(){S()&&d().navigateTo({url:"/pages/address/index"}).catch(function(){})}function z(){S()&&d().navigateTo({url:"/pages/after-sale/index"}).catch(function(){})}function A(){S()&&d().navigateTo({url:"/pages/membership/index"}).catch(function(){})}function Y(){(0,f.WG)(null),t(null),d().showToast({title:"\u5df2\u9000\u51fa",icon:"none"})}function W(){d().makePhoneCall({phoneNumber:"4008888888"}).catch(function(){d().showToast({title:"\u62e8\u6253\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})})}(0,c.useEffect)(function(){T()},[]),(0,r.usePullDownRefresh)(function(){T()});var P=(0,c.useMemo)(function(){return[{key:"orders",title:"\u8ba2\u5355",desc:"\u67e5\u770b\u5168\u90e8\u8ba2\u5355",action:C},{key:"coupons",title:"\u4f18\u60e0\u5238",desc:"\u67e5\u770b\u53ef\u7528\u6743\u76ca",action:R},{key:"address",title:"\u6536\u8d27\u5730\u5740",desc:"\u7ba1\u7406\u5e38\u7528\u5730\u5740",action:E},{key:"membership",title:"\u4f1a\u5458\u6743\u76ca",desc:i?"\u67e5\u770b\u79ef\u5206\u4e0e\u6210\u957f\u503c":"\u767b\u5f55\u540e\u53ef\u540c\u6b65\u6743\u76ca",action:A},{key:"service",title:"\u552e\u540e\u670d\u52a1",desc:"\u8fdb\u5ea6&\u552e\u540e\u64cd\u4f5c",action:z}]},[C,R,E,A,z,i]);return(0,h.jsxs)(a.Ss,{style:{minHeight:"100vh",backgroundColor:"#f5f6f8",padding:20},children:[(0,h.jsxs)(a.Ss,{style:{backgroundColor:"#fff",borderRadius:16,padding:20,display:"flex",alignItems:"center"},children:[(0,h.jsx)(a._V,{src:(null===i||void 0===i?void 0:i.avatar)||"https://dummyimage.com/120x120/dcdcdc/333333&text=Tea",style:{width:80,height:80,borderRadius:40,marginRight:16}}),(0,h.jsxs)(a.Ss,{style:{flex:1},children:[(0,h.jsx)(a.EY,{style:{fontSize:20,fontWeight:"bold",display:"block"},children:i?i.nickname||"\u5fae\u4fe1\u7528\u6237":"\u672a\u767b\u5f55\u7528\u6237"}),(null===i||void 0===i?void 0:i.phone)&&(0,h.jsx)(a.EY,{style:{color:"#666",display:"block",marginTop:6},children:i.phone}),v&&(0,h.jsx)(a.EY,{style:{color:"#ff4d4f",display:"block",marginTop:6},children:x?"\u52a0\u8f7d\u4e2d...":v})]}),i?(0,h.jsx)(a.$n,{size:"mini",onClick:Y,children:"\u9000\u51fa"}):(0,h.jsx)(a.$n,{size:"mini",onClick:w,loading:x,children:"\u53bb\u767b\u5f55"})]}),(0,h.jsxs)(a.Ss,{style:{backgroundColor:"#fff",borderRadius:16,padding:20,marginTop:16},children:[(0,h.jsx)(a.EY,{style:{fontSize:16,fontWeight:"bold"},children:"\u6211\u7684\u670d\u52a1"}),(0,h.jsx)(a.Ss,{style:{display:"flex",flexWrap:"wrap",marginTop:12},children:P.map(function(n,e){return(0,h.jsxs)(a.Ss,{style:{width:"50%",paddingTop:12,paddingBottom:12,textAlign:"center",borderRight:e%2===0?"1px solid #f0f0f0":"none",borderBottom:e<P.length-2?"1px solid #f0f0f0":"none"},onClick:n.action,children:[(0,h.jsx)(a.EY,{style:{display:"block",fontSize:18,fontWeight:"bold"},children:n.title}),(0,h.jsx)(a.EY,{style:{color:"#999",fontSize:12},children:n.desc})]},n.key)})})]}),(0,h.jsxs)(a.Ss,{style:{backgroundColor:"#fff",borderRadius:16,padding:20,marginTop:16},children:[(0,h.jsx)(a.EY,{style:{fontSize:16,fontWeight:"bold"},children:"\u8d26\u53f7\u64cd\u4f5c"}),(0,h.jsx)(a.$n,{style:{marginTop:12},onClick:w,loading:x,children:i?"\u5207\u6362\u8d26\u53f7":"\u767b\u5f55 / \u6ce8\u518c"}),(0,h.jsx)(a.$n,{style:{marginTop:12},onClick:W,children:"\u8054\u7cfb\u5ba2\u670d"})]})]})}var g={navigationBarTitleText:"\u6211\u7684",enablePullDownRefresh:!0},x=(0,t.eU)(p,"pages/profile/index",{root:{cn:[]}},g||{});p&&p.behaviors&&(x.behaviors=(x.behaviors||[]).concat(p.behaviors));Page(x)}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[907,96,76],function(){return e(3404)});n.O()}]);