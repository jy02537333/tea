"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[89],{7234:function(e,n,t){var s=t(7586),r=t(8646),i=t(6673),o=t(9986),a=t(7378),c=t(427),l=t(7168),u=t.n(l),d=t(6787),h=t(6106);function p(){var e,n=u().getCurrentInstance(),t=null===n||void 0===n||null===(e=n.router)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.store_id,s=t?Number(t):NaN,l=(0,a.useState)(Number.isFinite(s)&&s>0?s:null),p=(0,o.A)(l,2),f=p[0],x=(p[1],(0,a.useState)([])),m=(0,o.A)(x,2),y=m[0],j=m[1],b=(0,a.useState)(!1),g=(0,o.A)(b,2),w=g[0],S=g[1],v=(0,a.useState)(!1),k=(0,o.A)(v,2),_=k[0],A=k[1],E=(0,a.useState)(null),Y=(0,o.A)(E,2),B=Y[0],T=Y[1],C=(0,a.useState)("bank"),I=(0,o.A)(C,2),z=I[0],D=I[1],N=(0,a.useState)(""),O=(0,o.A)(N,2),W=O[0],$=O[1],R=(0,a.useState)(""),J=(0,o.A)(R,2),F=J[0],K=J[1],M=(0,a.useState)(""),P=(0,o.A)(M,2),U=P[0],q=P[1],G=(0,a.useState)(!1),H=(0,o.A)(G,2),L=H[0],Q=H[1];function V(e){return X.apply(this,arguments)}function X(){return X=(0,i.A)((0,r.A)().m(function e(n){var t,s;return(0,r.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return S(!0),e.p=1,e.n=2,(0,d.EC)(n);case 2:t=e.v,j(t||[]),e.n=4;break;case 3:e.p=3,s=e.v,console.error("load store accounts failed",s),u().showToast({title:"\u52a0\u8f7d\u6536\u6b3e\u8d26\u6237\u5931\u8d25",icon:"none"});case 4:return e.p=4,S(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),X.apply(this,arguments)}function Z(){T(null),D("bank"),$(""),K(""),q(""),Q(!1)}function ee(e){T(e),D(e.account_type||"bank"),$(e.account_name||""),K(e.account_no||""),q(e.bank_name||""),Q(!!e.is_default)}function ne(){return te.apply(this,arguments)}function te(){return te=(0,i.A)((0,r.A)().m(function e(){var n,t;return(0,r.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(f){e.n=1;break}return u().showToast({title:"\u7f3a\u5c11\u95e8\u5e97\u4fe1\u606f",icon:"none"}),e.a(2);case 1:if(W&&F){e.n=2;break}return u().showToast({title:"\u8bf7\u586b\u5199\u8d26\u6237\u540d\u548c\u8d26\u53f7",icon:"none"}),e.a(2);case 2:if(n={account_type:z,account_name:W,account_no:F,bank_name:U,is_default:L},e.p=3,!B){e.n=5;break}return e.n=4,(0,d.KW)(f,B.id,n);case 4:u().showToast({title:"\u5df2\u66f4\u65b0",icon:"success"}),e.n=7;break;case 5:return e.n=6,(0,d.n9)(f,n);case 6:u().showToast({title:"\u5df2\u65b0\u589e",icon:"success"});case 7:Z(),V(f),e.n=9;break;case 8:e.p=8,t=e.v,console.error("submit account failed",t),u().showToast({title:"\u4fdd\u5b58\u5931\u8d25",icon:"none"});case 9:return e.a(2)}},e,null,[[3,8]])})),te.apply(this,arguments)}function se(e){return re.apply(this,arguments)}function re(){return re=(0,i.A)((0,r.A)().m(function e(n){var t,s;return(0,r.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(f){e.n=1;break}return e.a(2);case 1:return e.n=2,u().showModal({title:"\u786e\u8ba4\u5220\u9664",content:"\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u6536\u6b3e\u8d26\u6237\u5417\uff1f"});case 2:if(t=e.v,t.confirm){e.n=3;break}return e.a(2);case 3:return e.p=3,e.n=4,(0,d.gg)(f,n.id);case 4:u().showToast({title:"\u5df2\u5220\u9664",icon:"success"}),B&&B.id===n.id&&Z(),V(f),e.n=6;break;case 5:e.p=5,s=e.v,console.error("delete account failed",s),u().showToast({title:"\u5220\u9664\u5931\u8d25",icon:"none"});case 6:return e.a(2)}},e,null,[[3,5]])})),re.apply(this,arguments)}function ie(e){return(0,h.jsxs)(c.Ss,{style:{padding:12,marginBottom:8,borderWidth:1,borderStyle:"solid",borderColor:"#eee",borderRadius:4},children:[(0,h.jsxs)(c.Ss,{style:{marginBottom:4,display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,h.jsxs)(c.EY,{children:[e.account_name," (",e.account_type||"bank",")"]}),e.is_default&&(0,h.jsx)(c.EY,{style:{color:"#07c160"},children:"\u9ed8\u8ba4"})]}),(0,h.jsx)(c.Ss,{style:{marginBottom:4},children:(0,h.jsxs)(c.EY,{children:["\u8d26\u53f7\uff1a",e.account_no]})}),e.bank_name&&(0,h.jsx)(c.Ss,{style:{marginBottom:4},children:(0,h.jsxs)(c.EY,{children:["\u94f6\u884c/\u6e20\u9053\uff1a",e.bank_name]})}),(0,h.jsxs)(c.Ss,{style:{display:"flex",flexDirection:"row"},children:[(0,h.jsx)(c.$n,{size:"mini",onClick:function(){return ee(e)},children:"\u7f16\u8f91"}),(0,h.jsx)(c.Ss,{style:{width:8}}),(0,h.jsx)(c.$n,{size:"mini",type:"warn",onClick:function(){return se(e)},children:"\u5220\u9664"})]})]},e.id)}return(0,a.useEffect)(function(){f?V(f):u().showToast({title:"\u7f3a\u5c11\u95e8\u5e97\u4fe1\u606f\uff0c\u8bf7\u4ece\u9996\u9875\u8fdb\u5165",icon:"none"})},[f]),(0,h.jsxs)(c.Ss,{style:{padding:12},children:[(0,h.jsx)(c.Ss,{style:{marginBottom:12},children:(0,h.jsx)(c.EY,{style:{fontSize:18,fontWeight:"bold"},children:"\u95e8\u5e97\u6536\u6b3e\u8d26\u6237\u8bbe\u7f6e"})}),(0,h.jsxs)(c.Ss,{style:{marginBottom:12,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,h.jsx)(c.EY,{style:{marginRight:8},children:"\u53ea\u770b\u9ed8\u8ba4\u8d26\u6237"}),(0,h.jsx)(c.dO,{checked:_,onChange:function(e){return A(!!e.detail.value)}})]}),w&&(0,h.jsx)(c.EY,{children:"\u52a0\u8f7d\u4e2d..."}),!w&&(_?0===y.filter(function(e){return e.is_default}).length:0===y.length)&&(0,h.jsx)(c.EY,{children:"\u6682\u672a\u914d\u7f6e\u6536\u6b3e\u8d26\u6237"}),!w&&(_?y.filter(function(e){return e.is_default}):y).length>0&&(0,h.jsx)(c.Ss,{style:{marginBottom:16},children:(_?y.filter(function(e){return e.is_default}):y).map(ie)}),(0,h.jsxs)(c.Ss,{style:{marginTop:12,paddingTop:12,borderTopWidth:1,borderStyle:"solid",borderColor:"#eee"},children:[(0,h.jsx)(c.EY,{style:{fontSize:16,marginBottom:8},children:B?"\u7f16\u8f91\u6536\u6b3e\u8d26\u6237":"\u65b0\u589e\u6536\u6b3e\u8d26\u6237"}),(0,h.jsxs)(c.Ss,{style:{marginBottom:8},children:[(0,h.jsx)(c.EY,{children:"\u8d26\u6237\u7c7b\u578b\uff08bank / alipay / wechat\uff09"}),(0,h.jsx)(c.pd,{type:"text",value:z,onInput:function(e){return D(e.detail.value)},placeholder:"bank / alipay / wechat"})]}),(0,h.jsxs)(c.Ss,{style:{marginBottom:8},children:[(0,h.jsx)(c.EY,{children:"\u8d26\u6237\u540d"}),(0,h.jsx)(c.pd,{type:"text",value:W,onInput:function(e){return $(e.detail.value)},placeholder:"\u8bf7\u8f93\u5165\u8d26\u6237\u5f00\u6237\u540d"})]}),(0,h.jsxs)(c.Ss,{style:{marginBottom:8},children:[(0,h.jsx)(c.EY,{children:"\u8d26\u53f7 / \u6536\u6b3e\u53f7"}),(0,h.jsx)(c.pd,{type:"text",value:F,onInput:function(e){return K(e.detail.value)},placeholder:"\u94f6\u884c\u5361\u53f7 / \u652f\u4ed8\u5b9d\u8d26\u53f7\u7b49"})]}),(0,h.jsxs)(c.Ss,{style:{marginBottom:8},children:[(0,h.jsx)(c.EY,{children:"\u94f6\u884c\u540d\u79f0 / \u6e20\u9053\u540d\u79f0\uff08\u53ef\u9009\uff09"}),(0,h.jsx)(c.pd,{type:"text",value:U,onInput:function(e){return q(e.detail.value)},placeholder:"\u5982 \u4e2d\u56fd\u94f6\u884c\u676d\u5dde\u5206\u884c / \u652f\u4ed8\u5b9d"})]}),(0,h.jsxs)(c.Ss,{style:{marginBottom:12,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,h.jsx)(c.EY,{style:{marginRight:8},children:"\u8bbe\u4e3a\u9ed8\u8ba4\u8d26\u6237"}),(0,h.jsx)(c.dO,{checked:L,onChange:function(e){return Q(!!e.detail.value)}})]}),(0,h.jsx)(c.$n,{type:"primary",onClick:ne,children:B?"\u4fdd\u5b58\u4fee\u6539":"\u65b0\u589e\u8d26\u6237"}),B&&(0,h.jsx)(c.Ss,{style:{marginTop:8},children:(0,h.jsx)(c.$n,{size:"mini",onClick:Z,children:"\u53d6\u6d88\u7f16\u8f91"})})]})]})}var f={},x=(0,s.eU)(p,"pages/store-accounts/index",{root:{cn:[]}},f||{});p&&p.behaviors&&(x.behaviors=(x.behaviors||[]).concat(p.behaviors));Page(x)}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[907,96,76],function(){return n(7234)});e.O()}]);