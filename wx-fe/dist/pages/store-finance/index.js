"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[991],{4264:function(e,n,r){var i=r(7586),t=r(8646),o=r(6673),s=r(9986),d=r(7378),l=r(427),a=r(7168),c=r.n(a),u=r(6787),h=r(6106);function m(){var e=(0,d.useState)(void 0),n=(0,s.A)(e,2),r=n[0],i=n[1],a=(0,d.useState)([]),m=(0,s.A)(a,2),f=m[0],v=m[1],x=(0,d.useState)(!1),y=(0,s.A)(x,2),p=y[0],j=y[1],g=(0,d.useState)(void 0),S=(0,s.A)(g,2),b=S[0],w=S[1],A=(0,d.useState)(""),E=(0,s.A)(A,2),Y=E[0],C=E[1],B=(0,d.useState)(""),k=(0,s.A)(B,2),N=k[0],W=k[1];function z(e,n,r,i){return L.apply(this,arguments)}function L(){return L=(0,o.A)((0,t.A)().m(function e(n,r,i,o){var s,d,l,a;return(0,t.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return j(!0),e.p=1,e.n=2,(0,u.FS)(n,{page:1,limit:50,type:r,start:i,end:o});case 2:s=e.v,d=s,l=[],Array.isArray(null===d||void 0===d?void 0:d.data)?l=d.data:Array.isArray(null===d||void 0===d?void 0:d.items)?l=d.items:Array.isArray(d)&&(l=d),v(l),e.n=4;break;case 3:e.p=3,a=e.v,console.error("load store finance records failed",a),c().showToast({title:"\u8d22\u52a1\u6d41\u6c34\u52a0\u8f7d\u5931\u8d25",icon:"none"});case 4:return e.p=4,j(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),L.apply(this,arguments)}function _(e){w(e)}function T(e){var n,r=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.value;C(r||"")}function $(e){var n,r=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.value;W(r||"")}function D(e){return"payment"===e?"\u6536\u6b3e":"refund"===e?"\u9000\u6b3e":"withdraw"===e?"\u63d0\u73b0":e}function F(e){return"in"===e?"\u6536\u5165":"out"===e?"\u652f\u51fa":e}function I(e){if(void 0===e||null===e)return"-";var n=Number(e);return Number.isNaN(n)?String(e):n.toFixed(2)}return(0,d.useEffect)(function(){var e,n=c().getCurrentInstance().router,r=null===n||void 0===n||null===(e=n.params)||void 0===e?void 0:e.store_id;if(r){var t=Number(r);!Number.isNaN(t)&&t>0&&(i(t),z(t,b,Y||void 0,N||void 0))}else c().showToast({title:"\u7f3a\u5c11\u95e8\u5e97\u4fe1\u606f\uff0c\u8bf7\u4ece\u9996\u9875\u8fdb\u5165",icon:"none"})},[]),(0,d.useEffect)(function(){r&&z(r,b,Y||void 0,N||void 0)},[r,b,Y,N]),(0,h.jsxs)(l.Ss,{style:{padding:12},children:[(0,h.jsx)(l.EY,{style:{fontSize:18,fontWeight:"bold"},children:"\u95e8\u5e97\u8d22\u52a1\u6d41\u6c34"}),(0,h.jsxs)(l.Ss,{style:{marginTop:12,marginBottom:8,display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"},children:[(0,h.jsx)(l.EY,{children:"\u8d77\u59cb\u65e5\u671f\uff1a"}),(0,h.jsx)(l.LC,{mode:"date",value:Y,onChange:T,children:(0,h.jsx)(l.Ss,{style:{padding:4,borderWidth:1,borderStyle:"solid",borderColor:"#ddd",minWidth:120,marginRight:8},children:(0,h.jsx)(l.EY,{children:Y||"\u4e0d\u9650"})})}),(0,h.jsx)(l.EY,{children:"\u7ed3\u675f\u65e5\u671f\uff1a"}),(0,h.jsx)(l.LC,{mode:"date",value:N,onChange:$,children:(0,h.jsx)(l.Ss,{style:{padding:4,borderWidth:1,borderStyle:"solid",borderColor:"#ddd",minWidth:120},children:(0,h.jsx)(l.EY,{children:N||"\u4e0d\u9650"})})})]}),(0,h.jsxs)(l.Ss,{style:{marginTop:8,marginBottom:12,display:"flex",flexDirection:"row"},children:[(0,h.jsx)(l.$n,{size:"mini",onClick:function(){return _(void 0)},children:"\u5168\u90e8"}),(0,h.jsx)(l.$n,{size:"mini",onClick:function(){return _("payment")},style:{marginLeft:8},children:"\u6536\u6b3e"}),(0,h.jsx)(l.$n,{size:"mini",onClick:function(){return _("refund")},style:{marginLeft:8},children:"\u9000\u6b3e"}),(0,h.jsx)(l.$n,{size:"mini",onClick:function(){return _("withdraw")},style:{marginLeft:8},children:"\u63d0\u73b0"})]}),p&&(0,h.jsx)(l.EY,{children:"\u52a0\u8f7d\u4e2d..."}),!p&&!f.length&&(0,h.jsx)(l.EY,{children:"\u6682\u65e0\u8d22\u52a1\u6d41\u6c34"}),!p&&f.map(function(e){return(0,h.jsxs)(l.Ss,{style:{marginBottom:12,paddingBottom:8,borderBottomWidth:1,borderStyle:"solid",borderColor:"#eee"},children:[(0,h.jsx)(l.Ss,{style:{marginBottom:4},children:(0,h.jsxs)(l.EY,{children:[D(e.type)," \xb7 ",F(e.direction)]})}),(0,h.jsx)(l.Ss,{style:{marginBottom:2},children:(0,h.jsxs)(l.EY,{children:["\u91d1\u989d\uff1a\xa5",I(e.amount)]})}),e.fee&&Number(e.fee)>0&&(0,h.jsx)(l.Ss,{style:{marginBottom:2},children:(0,h.jsxs)(l.EY,{children:["\u624b\u7eed\u8d39\uff1a\xa5",I(e.fee)]})}),e.related_no&&(0,h.jsx)(l.Ss,{style:{marginBottom:2},children:(0,h.jsxs)(l.EY,{children:["\u5173\u8054\u5355\u53f7\uff1a",e.related_no]})}),e.remark&&(0,h.jsx)(l.Ss,{style:{marginBottom:2},children:(0,h.jsxs)(l.EY,{children:["\u5907\u6ce8\uff1a",e.remark]})}),e.created_at&&(0,h.jsx)(l.Ss,{children:(0,h.jsxs)(l.EY,{children:["\u65f6\u95f4\uff1a",e.created_at]})})]},"".concat(e.type,"-").concat(e.id))})]})}var f={},v=(0,i.eU)(m,"pages/store-finance/index",{root:{cn:[]}},f||{});m&&m.behaviors&&(v.behaviors=(v.behaviors||[]).concat(m.behaviors));Page(v)}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[907,96,76],function(){return n(4264)});e.O()}]);